# NCU-UI å®æ“æ‰‹å†Œï¼šä»ç•Œé¢åˆ°ä¼˜åŒ–çš„å®Œæ•´æŒ‡å—

> **ç›®æ ‡**ï¼šå…·ä½“åˆ° NCU-UI çš„æ¯ä¸ªæŒ‰é’®ã€Tabã€å›¾è¡¨ï¼Œå‘Šè¯‰ä½ çœ‹ä»€ä¹ˆã€æ€ä¹ˆçœ‹ã€å¦‚ä½•è§£è¯»

---

## ç›®å½•

1. [NCU-UI ç•Œé¢å¸ƒå±€](#ncu-ui-ç•Œé¢å¸ƒå±€)
2. [Details é¡µé¢ï¼šæ ¸å¿ƒåˆ†æèµ·ç‚¹](#details-é¡µé¢æ ¸å¿ƒåˆ†æèµ·ç‚¹)
3. [Speed of Light åˆ†æï¼ˆ5 åˆ†é’Ÿå¿«é€Ÿè¯Šæ–­ï¼‰](#speed-of-light-åˆ†æ)
4. [Memory Workload Analysisï¼ˆå†…å­˜æ·±åº¦åˆ†æï¼‰](#memory-workload-analysis)
5. [Compute Workload Analysisï¼ˆè®¡ç®—æ·±åº¦åˆ†æï¼‰](#compute-workload-analysis)
6. [Scheduler Statisticsï¼ˆè°ƒåº¦å™¨åˆ†æï¼‰](#scheduler-statistics)
7. [Source é¡µé¢ï¼ˆæºç çº§åˆ†æï¼‰](#source-é¡µé¢æºç çº§åˆ†æ)
8. [å®Œæ•´åˆ†ææµç¨‹å®æˆ˜](#å®Œæ•´åˆ†ææµç¨‹å®æˆ˜)

---

## NCU-UI ç•Œé¢å¸ƒå±€

### å¯åŠ¨ NCU-UI

```bash
# æ–¹æ³• 1ï¼šä» .ncu-rep æ–‡ä»¶æ‰“å¼€
ncu-ui profile.ncu-rep

# æ–¹æ³• 2ï¼šå¯¼å…¥å¤šä¸ªæ–‡ä»¶å¯¹æ¯”
ncu-ui baseline.ncu-rep optimized.ncu-rep
```

### ä¸»ç•Œé¢å¸ƒå±€ï¼ˆæ‰“å¼€åçœ‹åˆ°çš„ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  File  View  Tools  Help                                    â”‚  â† èœå•æ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â—€ â–¶  [Kernel Name: vectorAdd]  â–¼                          â”‚  â† Kernel é€‰æ‹©å™¨
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚                                              â”‚
â”‚  Page List   â”‚         Main Content Area                   â”‚
â”‚  (å·¦ä¾§)      â”‚         (å³ä¾§å†…å®¹åŒº)                         â”‚
â”‚              â”‚                                              â”‚
â”‚  â–¸ Details   â”‚  â† æ ¸å¿ƒåˆ†æé¡µé¢                             â”‚
â”‚  â–¸ Source    â”‚  â† æºç çº§åˆ†æ                               â”‚
â”‚  â–¸ ...       â”‚                                              â”‚
â”‚              â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®æ“ä½œ**ï¼š
1. **å·¦ä¸Šè§’ Kernel ä¸‹æ‹‰æ¡†**ï¼šé€‰æ‹©è¦åˆ†æçš„ kernelï¼ˆå¦‚æœæœ‰å¤šä¸ªï¼‰
2. **å·¦ä¾§ Page List**ï¼šç‚¹å‡»å±•å¼€å„ä¸ªåˆ†æé¡µé¢
3. **å³ä¾§å†…å®¹åŒº**ï¼šæ˜¾ç¤ºå…·ä½“çš„åˆ†ææ•°æ®å’Œå›¾è¡¨

---

## Details é¡µé¢ï¼šæ ¸å¿ƒåˆ†æèµ·ç‚¹

### è¿›å…¥ Details é¡µé¢

```
å·¦ä¾§ Page List â†’ ç‚¹å‡» "Details" â†’ å±•å¼€å­é¡¹
```

### Details é¡µé¢çš„ç»“æ„

```
Details
â”œâ”€ Summary                    â† æ€»è§ˆï¼ˆæ—¶é—´ã€ååé‡ï¼‰
â”œâ”€ GPU Speed Of Light         â† æœ€é‡è¦ï¼å¿«é€Ÿè¯Šæ–­
â”œâ”€ Memory Workload Analysis   â† å†…å­˜æ·±åº¦åˆ†æ
â”œâ”€ Compute Workload Analysis  â† è®¡ç®—æ·±åº¦åˆ†æ
â”œâ”€ Scheduler Statistics       â† è°ƒåº¦å™¨ç»Ÿè®¡
â”œâ”€ Warp State Statistics      â† Warp çŠ¶æ€ï¼ˆå…³é”®ï¼ï¼‰
â”œâ”€ Instruction Statistics     â† æŒ‡ä»¤ç»Ÿè®¡
â”œâ”€ Launch Statistics          â† Launch é…ç½®
â”œâ”€ Occupancy                  â† å ç”¨ç‡åˆ†æ
â””â”€ ...
```

### Summaryï¼ˆæ€»è§ˆï¼‰

**ä½ç½®**ï¼š`Details â†’ Summary`

**çœ‹åˆ°çš„å†…å®¹**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Summary                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Kernel Name:    vectorAdd                   â”‚
â”‚ Duration:       15.2 ms                     â”‚  â† å…³é”®ï¼šæ€»æ—¶é—´
â”‚ Grid Size:      (512, 1, 1)                 â”‚
â”‚ Block Size:     (256, 1, 1)                 â”‚
â”‚ Registers/Th:   16                          â”‚
â”‚ Shared Mem:     0 bytes                     â”‚
â”‚ ...                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®æŒ‡æ ‡**ï¼š
- **Duration**ï¼škernel æ‰§è¡Œæ—¶é—´ï¼ˆè¿™æ˜¯ä¼˜åŒ–çš„ç›®æ ‡ï¼‰
- **Grid/Block Size**ï¼šLaunch é…ç½®
- **Registers/Thread**ï¼šæ¯ä¸ªçº¿ç¨‹çš„å¯„å­˜å™¨ä½¿ç”¨ï¼ˆå½±å“ Occupancyï¼‰

---

## Speed of Light åˆ†æ

### è¿›å…¥ Speed of Light

```
Details â†’ GPU Speed Of Light
```

### ç•Œé¢è¯´æ˜ï¼ˆæœ€é‡è¦çš„é¡µé¢ï¼ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GPU Speed Of Light                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  SM Throughput  â”‚  â”‚ Memory Through  â”‚               â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚               â”‚
â”‚  â”‚     65.2%       â”‚  â”‚     82.5%       â”‚  â† å…³é”®æ•°å­—   â”‚
â”‚  â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘    â”‚  â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â”‚  â† è¿›åº¦æ¡     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ Performance Limiters (æ€§èƒ½é™åˆ¶å› ç´ )    â”‚               â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
â”‚  â”‚ â— Memory                              â”‚  â† ç“¶é¢ˆç±»å‹   â”‚
â”‚  â”‚   DRAM Bandwidth: 82%                 â”‚               â”‚
â”‚  â”‚   L2 Cache: 75%                       â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¦‚ä½•è§£è¯»

#### 1. SM Throughputï¼ˆè®¡ç®—ååé‡ï¼‰

**ä½ç½®**ï¼šå·¦ä¸Šè§’çš„å¤§æ•°å­—å’Œè¿›åº¦æ¡

**é¢œè‰²å«ä¹‰**ï¼š
- ğŸŸ¢ ç»¿è‰²ï¼ˆ>80%ï¼‰ï¼šGood, Compute-bound
- ğŸŸ¡ é»„è‰²ï¼ˆ60-80%ï¼‰ï¼šModerate
- ğŸŸ  æ©™è‰²ï¼ˆ40-60%ï¼‰ï¼šLow
- ğŸ”´ çº¢è‰²ï¼ˆ<40%ï¼‰ï¼šVery Low

**è§£è¯»**ï¼š
```
SM Throughput = 65%

å«ä¹‰ï¼šSM (è®¡ç®—å•å…ƒ) 65% çš„æ—¶é—´æ˜¯æ´»è·ƒçš„
ä½†ï¼šä¸ç­‰äº"65% æ—¶é—´åœ¨è®¡ç®—"ï¼
     è¿˜åŒ…æ‹¬ç­‰å¾…æŒ‡ä»¤ã€ç­‰å¾…æ•°æ®ç­‰

åˆ¤æ–­ï¼š
- > 80% â†’ å¯èƒ½æ˜¯ Compute-bound
- < 60% â†’ å¯èƒ½ä¸æ˜¯è®¡ç®—ç“¶é¢ˆ
```

#### 2. Memory Throughputï¼ˆå†…å­˜ååé‡ï¼‰

**ä½ç½®**ï¼šå³ä¸Šè§’çš„å¤§æ•°å­—å’Œè¿›åº¦æ¡

**é¢œè‰²å«ä¹‰**ï¼šåŒ SM Throughput

**è§£è¯»**ï¼š
```
Memory Throughput = 82%

å«ä¹‰ï¼šå†…å­˜å­ç³»ç»Ÿ 82% çš„æ—¶é—´åœ¨ä¼ è¾“æ•°æ®
åˆ¤æ–­ï¼š
- > 80% â†’ Memory-boundï¼ˆå†…å­˜ç“¶é¢ˆï¼‰
- < 60% â†’ ä¸æ˜¯å†…å­˜ç“¶é¢ˆ
```

#### 3. å››è±¡é™åˆ¤æ–­æ³•ï¼ˆæ ¸å¿ƒï¼ï¼‰

**æ ¹æ®ä¸¤ä¸ªæŒ‡æ ‡å¿«é€Ÿåˆ¤æ–­**ï¼š

```
         SM Throughput
              â†‘
          80% â”‚
              â”‚  Balanced      Compute-bound
              â”‚  (å‡è¡¡)         (ä¼˜åŒ–è®¡ç®—)
              â”‚
              â”‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Memory Throughput
          80% â”‚
              â”‚  Under-utilized  Memory-bound
              â”‚  (åˆ©ç”¨ç‡ä½)       (ä¼˜åŒ–å†…å­˜)
              â”‚
```

**ç¤ºä¾‹è§£è¯»**ï¼š

```
åœºæ™¯ 1: SM=85%, Memory=30%
â†’ Compute-bound
â†’ ä¸‹ä¸€æ­¥ï¼šç‚¹å‡» "Compute Workload Analysis"

åœºæ™¯ 2: SM=25%, Memory=88%
â†’ Memory-bound
â†’ ä¸‹ä¸€æ­¥ï¼šç‚¹å‡» "Memory Workload Analysis"

åœºæ™¯ 3: SM=85%, Memory=85%
â†’ Balanced (æ¥è¿‘ç¡¬ä»¶æé™)
â†’ ä¼˜åŒ–ç©ºé—´å°ï¼Œè€ƒè™‘ç®—æ³•çº§ä¼˜åŒ–

åœºæ™¯ 4: SM=30%, Memory=35%
â†’ Under-utilized
â†’ ä¸‹ä¸€æ­¥ï¼šç‚¹å‡» "Scheduler Statistics" å’Œ "Occupancy"
```

#### 4. Performance Limitersï¼ˆæ€§èƒ½é™åˆ¶å› ç´ ï¼‰

**ä½ç½®**ï¼šSpeed of Light é¡µé¢ä¸‹æ–¹

**æ˜¾ç¤ºå†…å®¹**ï¼š
```
Performance Limiters:
â— Memory                        â† ä¸»è¦ç“¶é¢ˆ
  - DRAM Bandwidth: 82%
  - L2 Cache Bandwidth: 75%
  - L1 Cache Bandwidth: 60%

â— Compute
  - SM Active: 65%
```

**è§£è¯»**ï¼š
- è¿™é‡Œä¼šç›´æ¥å‘Šè¯‰ä½ ä¸»è¦ç“¶é¢ˆæ˜¯ä»€ä¹ˆ
- ä½†è¦ç»“åˆå…·ä½“æ•°å€¼åˆ¤æ–­

---

## Memory Workload Analysis

### è¿›å…¥ Memory Workload Analysis

```
Details â†’ Memory Workload Analysis
```

### ç•Œé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Memory Workload Analysis                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€ Memory Chart (ä¸Šæ–¹å›¾è¡¨) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚   L1/TEX    L2      DRAM                                â”‚ â”‚
â”‚  â”‚    â–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆâ–ˆ    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â† æŸ±çŠ¶å›¾æ˜¾ç¤ºå„çº§å¸¦å®½åˆ©ç”¨ç‡   â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€ Memory Tables (ä¸‹æ–¹è¡¨æ ¼) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  Metric Name                    Value        % of Peak â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚  DRAM Throughput               1200 GB/s      80%      â”‚ â”‚  â† å…³é”®
â”‚  â”‚  L2 Cache Hit Rate              45.2%          -       â”‚ â”‚  â† å…³é”®
â”‚  â”‚  L1/TEX Cache Hit Rate          88.3%          -       â”‚ â”‚  â† å…³é”®
â”‚  â”‚  Sectors Per Request (Global)    3.2           -       â”‚ â”‚  â† å…³é”®ï¼
â”‚  â”‚  ...                                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³é”®æŒ‡æ ‡è¯¦è§£

#### 1. DRAM Throughput

**åœ¨è¡¨æ ¼ä¸­çš„ä½ç½®**ï¼š`Memory Tables â†’ DRAM Throughput`

**æ˜¾ç¤ºæ ¼å¼**ï¼š
```
DRAM Throughput:  1200 GB/s  (80%)
                   â†‘           â†‘
                å®é™…å¸¦å®½    å ç†è®ºå³°å€¼ç™¾åˆ†æ¯”
```

**è§£è¯»**ï¼š
```
80% â†’ å†…å­˜å¸¦å®½åˆ©ç”¨ç‡é«˜ï¼Œæ¥è¿‘é¥±å’Œ
< 60% â†’ å†…å­˜å¸¦å®½åˆ©ç”¨ç‡ä½ï¼Œè¿˜æœ‰ä¼˜åŒ–ç©ºé—´

æ³¨æ„ï¼šé«˜ä¸ä¸€å®šå¥½ï¼
- å¦‚æœæ˜¯å› ä¸ºè®¿é—®æ¨¡å¼å·®ï¼Œæµªè´¹å¸¦å®½ â†’ å
- å¦‚æœæ˜¯è®¿é—®æ¨¡å¼å¥½ï¼Œå……åˆ†åˆ©ç”¨ â†’ å¥½
â†’ éœ€è¦çœ‹ "Sectors Per Request"
```

#### 2. L2 Cache Hit Rate

**åœ¨è¡¨æ ¼ä¸­çš„ä½ç½®**ï¼š`Memory Tables â†’ lts__t_sector_hit_rate`

**æ˜¾ç¤ºæ ¼å¼**ï¼š
```
L2 Cache Hit Rate:  45.2%
```

**è§£è¯»å’Œä¼˜åŒ–æ–¹å‘**ï¼š
```
> 90%  â† æå¥½ï¼Œæ•°æ®å¤ç”¨å¾ˆé«˜
70-90% â† è‰¯å¥½
50-70% â† ä¸€èˆ¬ï¼Œæœ‰ä¼˜åŒ–ç©ºé—´
< 50%  â† å·®ï¼Œå‡ ä¹æ²¡æœ‰å¤ç”¨

åœºæ™¯åˆ†æï¼š

åœºæ™¯ 1: L2 Hit = 20%
â†’ é—®é¢˜ï¼šæ•°æ®æ²¡æœ‰å¤ç”¨
â†’ åŸå› ï¼šWorking Set å¤ªå¤§ï¼Œè¶…è¿‡ L2 å®¹é‡
â†’ ä¼˜åŒ–ï¼š
   1. ç®—å­èåˆï¼ˆå‡å°‘é‡å¤è®¿é—®ï¼‰
   2. Tilingï¼ˆå‡å° Working Setï¼‰
   3. Shared Memoryï¼ˆåˆ©ç”¨ SRAMï¼‰

åœºæ™¯ 2: L2 Hit = 95%
â†’ é—®é¢˜ï¼šè™½ç„¶å‘½ä¸­ç‡é«˜ï¼Œä½†æ€§èƒ½è¿˜æ…¢
â†’ å¯èƒ½ï¼šL2 å¸¦å®½é¥±å’Œ
â†’ æ£€æŸ¥ï¼šL2 Cache Throughput
â†’ ä¼˜åŒ–ï¼šå‡å°‘æ€»è®¿é—®é‡ï¼ˆç®—å­èåˆï¼‰
```

#### 3. L1/TEX Cache Hit Rate

**åœ¨è¡¨æ ¼ä¸­çš„ä½ç½®**ï¼š`Memory Tables â†’ l1tex__t_sector_hit_rate`

**æ˜¾ç¤ºæ ¼å¼**ï¼š
```
L1/TEX Cache Hit Rate:  88.3%
```

**L1 vs L2 çš„å…³è”åˆ†æ**ï¼ˆé‡è¦ï¼ï¼‰ï¼š

```
ç»„åˆ 1: L1 Hit=95%, L2 Hit=30%
è§£è¯»ï¼š
- æ•°æ®åœ¨å½“å‰ SM çš„ L1 å¤ç”¨å¾ˆå¥½
- ä½†è·¨ kernel/è·¨ SM æ²¡æœ‰å¤ç”¨
ä¼˜åŒ–ï¼šå±€éƒ¨è®¿é—®å·²ä¼˜åŒ–ï¼Œå…¨å±€éœ€è¦ç®—å­èåˆ

ç»„åˆ 2: L1 Hit=50%, L2 Hit=90%
è§£è¯»ï¼š
- æ•°æ®åœ¨ L2 å¤ç”¨å¥½ï¼Œä½† L1 å†…æ²¡æœ‰å¤ç”¨
- å¯èƒ½æ˜¯ warp ä¹‹é—´è®¿é—®æ¨¡å¼å†²çª
ä¼˜åŒ–ï¼šè°ƒæ•´è®¿é—®æ¨¡å¼ï¼Œå¢åŠ  warp å†…å¤ç”¨

ç»„åˆ 3: L1 Hit=30%, L2 Hit=25%
è§£è¯»ï¼š
- å®Œå…¨æ²¡æœ‰æ•°æ®å¤ç”¨ï¼Œæµå¼è®¿é—®
- è¿™æ˜¯ element-wise æ“ä½œçš„ç‰¹å¾
ä¼˜åŒ–ï¼š
- coalescingï¼ˆè®©è®¿é—®è¿ç»­ï¼‰
- å‘é‡åŒ–ï¼ˆfloat4ï¼‰
- ç®—å­èåˆ
```

#### 4. Sectors Per Requestï¼ˆæœ€å…³é”®çš„å†…å­˜æŒ‡æ ‡ï¼ï¼‰

**åœ¨è¡¨æ ¼ä¸­çš„ä½ç½®**ï¼š
```
Memory Tables â†’ æ‰¾åˆ°è¿™ä¸€è¡Œï¼š
l1tex__average_t_sectors_per_request  æˆ–
Sectors Per Request (Global Load)
```

**æ˜¾ç¤ºæ ¼å¼**ï¼š
```
Sectors Per Request:  3.2
```

**è¿™æ˜¯ä»€ä¹ˆ**ï¼š
```
å®šä¹‰ï¼šæ¯æ¬¡å†…å­˜è¯·æ±‚å¹³å‡è®¿é—®å¤šå°‘ä¸ª sector (32 bytes)

ç†æƒ³å€¼ï¼š1.0
- è¡¨ç¤ºå®Œç¾çš„ coalesced accessï¼ˆåˆå¹¶è®¿é—®ï¼‰
- 32 ä¸ªçº¿ç¨‹è®¿é—®è¿ç»­çš„ 128 bytes

å®é™…å€¼ï¼š
1.0-1.2   â† æå¥½ï¼Œå‡ ä¹å®Œç¾ coalesced
1.2-2.0   â† è‰¯å¥½
2.0-4.0   â† ä¸€èˆ¬ï¼Œæœ‰æµªè´¹
> 4.0     â† å·®ï¼Œå¤§é‡æµªè´¹
```

**é‡åŒ–åˆ†æ**ï¼š

```
ç¤ºä¾‹ï¼šSectors Per Request = 3.2

å¸¦å®½æ•ˆç‡ = 1 / 3.2 = 31.25%
å¸¦å®½æµªè´¹ = 68.75%

A100 ç†è®ºå¸¦å®½ = 1.5 TB/s
å®é™…æœ‰æ•ˆå¸¦å®½ = 1.5 / 3.2 = 0.47 TB/s
æµªè´¹çš„å¸¦å®½ = 1.5 - 0.47 = 1.03 TB/s

ä¼˜åŒ–æ½œåŠ›ï¼š
å¦‚æœä¿®å¤åˆ° ratio = 1.0:
åŠ é€Ÿæ¯” = 3.2x
æ–°æ—¶é—´ = åŸæ—¶é—´ / 3.2
```

**åœ¨ NCU-UI ä¸­çš„å›¾è¡¨**ï¼š

```
Memory Chart éƒ¨åˆ†ä¼šæ˜¾ç¤ºï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Global Load Efficiency         â”‚
â”‚                                 â”‚
â”‚  Ideal:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  100%  â”‚
â”‚  Actual:    â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   31%   â”‚  â† çº¢è‰²/æ©™è‰²è¡¨ç¤ºä½æ•ˆ
â”‚                                 â”‚
â”‚  Wasted:    68.75%              â”‚  â† æ˜ç¡®æ˜¾ç¤ºæµªè´¹
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¦‚ä½•ä¼˜åŒ–**ï¼ˆä»£ç çº§ï¼‰ï¼š

```c
// âŒ å·®çš„è®¿é—®æ¨¡å¼ (ratio = 32)
__global__ void bad_kernel(float* data, int N) {
    int tid = threadIdx.x + blockIdx.x * blockDim.x;
    int stride = 64;  // å¤§æ­¥é•¿
    if (tid * stride < N) {
        float val = data[tid * stride];  // æ¯ä¸ªçº¿ç¨‹è®¿é—®ç›¸è·å¾ˆè¿œ
    }
}

// âœ… å¥½çš„è®¿é—®æ¨¡å¼ (ratio = 1.0)
__global__ void good_kernel(float* data, int N) {
    int tid = threadIdx.x + blockIdx.x * blockDim.x;
    if (tid < N) {
        float val = data[tid];  // è¿ç»­è®¿é—®
    }
}
```

**NCU-UI ä¸­å¦‚ä½•éªŒè¯**ï¼š

1. ä¼˜åŒ–å‰ï¼šè¿è¡Œ `ncu -o before ./program`
2. æ‰“å¼€ `ncu-ui before.ncu-rep`
3. æŸ¥çœ‹ `Sectors Per Request: 3.2`
4. ä¿®å¤ä»£ç 
5. ä¼˜åŒ–åï¼šè¿è¡Œ `ncu -o after ./program`
6. æ‰“å¼€ `ncu-ui after.ncu-rep`
7. æŸ¥çœ‹ `Sectors Per Request: 1.1` âœ“
8. å¯¹æ¯”æ€§èƒ½ï¼šæ—¶é—´åº”è¯¥å‡å°‘çº¦ 3x

#### 5. Shared Memory Bank Conflicts

**åœ¨è¡¨æ ¼ä¸­çš„ä½ç½®**ï¼š
```
Memory Tables â†’ æœç´¢ï¼š
l1tex__data_bank_conflicts_pipe_lsu  æˆ–
Shared Memory Bank Conflicts
```

**æ˜¾ç¤ºæ ¼å¼**ï¼š
```
Bank Conflicts:  125,000
Shared Accesses: 10,000,000
Conflict Rate:   1.25%
```

**è§£è¯»**ï¼š
```
0      â† å®Œç¾ï¼Œæ—  conflict
< 1%   â† å¾ˆå¥½
1-5%   â† å¯æ¥å—
5-10%  â† éœ€è¦ä¼˜åŒ–
> 10%  â† ä¸¥é‡é—®é¢˜
```

**NCU-UI ä¸­çš„å¯è§†åŒ–**ï¼š

```
å¯èƒ½æœ‰ä¸€ä¸ª Chart æ˜¾ç¤ºï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Shared Memory Bank Conflicts         â”‚
â”‚                                      â”‚
â”‚  Bank 0:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘  50%            â”‚
â”‚  Bank 1:  â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  20%            â”‚
â”‚  ...                                 â”‚
â”‚  Bank 31: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  80%            â”‚  â† å“ªäº› bank å†²çªå¤š
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¼˜åŒ–éªŒè¯**ï¼š

```c
// âŒ æœ‰ conflict
__shared__ float tile[32][32];
float val = tile[threadIdx.x][0];  // åˆ—è®¿é—® â†’ conflict

// âœ… æ·»åŠ  padding
__shared__ float tile[32][33];  // +1
float val = tile[threadIdx.x][0];  // æ—  conflict

// NCU-UI éªŒè¯ï¼š
// ä¼˜åŒ–å‰ï¼šBank Conflicts = 125,000
// ä¼˜åŒ–åï¼šBank Conflicts = 0 âœ“
```

---

## Compute Workload Analysis

### è¿›å…¥ Compute Workload Analysis

```
Details â†’ Compute Workload Analysis
```

### ç•Œé¢å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Compute Workload Analysis                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€ Instruction Mix (æŒ‡ä»¤åˆ†å¸ƒ) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚  FP32:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘  65%                           â”‚ â”‚
â”‚  â”‚  FP16:  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   0%                           â”‚ â”‚  â† Tensor Core?
â”‚  â”‚  INT:   â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  25%                           â”‚ â”‚
â”‚  â”‚  ...                                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€ Pipeline Utilization (æµæ°´çº¿åˆ©ç”¨ç‡) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚  FP32 Pipe:    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  75%                      â”‚ â”‚
â”‚  â”‚  Tensor Core:  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   0%                      â”‚ â”‚  â† å…³é”®ï¼
â”‚  â”‚  ...                                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³é”®æŒ‡æ ‡

#### 1. Tensor Core Utilization

**åœ¨ NCU-UI ä¸­çš„ä½ç½®**ï¼š
```
Compute Workload Analysis â†’ Tables â†’ æ‰¾åˆ°ï¼š
smsp__inst_executed_pipe_tensor.sum  æˆ–
Tensor Core Instructions
```

**æ˜¾ç¤º**ï¼š
```
Tensor Core Instructions:  0
```

**è§£è¯»**ï¼š

```
åœºæ™¯ 1: = 0ï¼Œä½†ä»£ç æ˜¯çŸ©é˜µä¹˜æ³•
â†’ é—®é¢˜ï¼šæ²¡æœ‰ä½¿ç”¨ Tensor Core
â†’ åŸå› ï¼š
   1. æ•°æ®ç±»å‹ä¸å¯¹ï¼ˆç”¨äº† FP32ï¼Œåº”è¯¥ç”¨ FP16/TF32ï¼‰
   2. æ²¡è°ƒç”¨ WMMA API
   3. çŸ©é˜µå¤§å°ä¸æ˜¯ 16 çš„å€æ•°
â†’ ä¼˜åŒ–ï¼š
   - æ¢ FP16
   - ä½¿ç”¨ cuBLAS
   - é¢„æœŸåŠ é€Ÿï¼š5-20x

åœºæ™¯ 2: > 0ï¼Œä½†åˆ©ç”¨ç‡ä½
â†’ æ£€æŸ¥ï¼šTensor Core Pipe Utilization
â†’ å¦‚æœ < 50%ï¼š
   - å¯èƒ½ Occupancy ä¸è¶³
   - å¯èƒ½è¢«å†…å­˜é™åˆ¶
```

**NCU-UI ä¸­çš„å›¾è¡¨**ï¼š

```
Pipeline Utilization Chart:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tensor Core Utilization        â”‚
â”‚                                â”‚
â”‚ Peak:    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  100%    â”‚
â”‚ Actual:  â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘    0%    â”‚  â† çº¢è‰²ï¼Œæ˜æ˜¾æœªç”¨
â”‚                                â”‚
â”‚ Opportunity: 20x speedup       â”‚  â† å¯èƒ½æ˜¾ç¤ºä¼˜åŒ–æ½œåŠ›
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2. Warp Divergence

**åœ¨ NCU-UI ä¸­çš„ä½ç½®**ï¼š
```
Compute Workload Analysis â†’ Tables â†’ æ‰¾åˆ°ï¼š
smsp__thread_inst_executed_per_inst_executed  æˆ–
Threads Per Instruction
```

**æ˜¾ç¤º**ï¼š
```
Threads Per Instruction:  16.5
Efficiency:               51.6%  (16.5 / 32)
```

**è§£è¯»**ï¼š
```
ç†æƒ³å€¼ï¼š32 (ä¸€ä¸ª warp æ‰€æœ‰ 32 threads éƒ½æ‰§è¡Œ)
å®é™…å€¼ï¼š16.5

æ•ˆç‡ = 16.5 / 32 = 51.6%
æµªè´¹ = 48.4%

åˆ¤æ–­ï¼š
> 90% (>29)  â† æå¥½ï¼Œå‡ ä¹æ—  divergence
80-90%       â† è‰¯å¥½
60-80%       â† ä¸€èˆ¬
< 60%        â† ä¸¥é‡ divergenceï¼Œéœ€è¦ä¼˜åŒ–
```

**NCU-UI å›¾è¡¨**ï¼š

```
å¯èƒ½æ˜¾ç¤ºï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Warp Divergence Analysis            â”‚
â”‚                                     â”‚
â”‚ Active Threads per Instruction:     â”‚
â”‚  32: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘  40%  â† ç†æƒ³æƒ…å†µ   â”‚
â”‚  16: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  50%  â† ä¸€åŠåˆ†æ”¯   â”‚
â”‚   8: â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  10%  â† ä¸¥é‡åˆ†æ”¯   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3. ILP (Issue Efficiency)

**åœ¨ NCU-UI ä¸­çš„ä½ç½®**ï¼š
```
Compute Workload Analysis â†’ Tables â†’ æ‰¾åˆ°ï¼š
smsp__issue_active.pct  æˆ–
Issue Efficiency
```

**æ˜¾ç¤º**ï¼š
```
Issue Efficiency:  45.2%
```

**è§£è¯»**ï¼š
```
å®šä¹‰ï¼šæŒ‡ä»¤å‘å°„å•å…ƒçš„æ´»è·ƒç¨‹åº¦
ç†æƒ³ï¼šæ¯å‘¨æœŸéƒ½åœ¨å‘å°„æŒ‡ä»¤

> 80%  â† å¾ˆå¥½
60-80% â† è‰¯å¥½
40-60% â† æœ‰åœé¡¿
< 40%  â† ä¸¥é‡åœé¡¿

åœºæ™¯ï¼šIssue Efficiency = 45%
â†’ é—®é¢˜ï¼šåªæœ‰ 45% æ—¶é—´åœ¨å‘å°„æŒ‡ä»¤
â†’ åŸå› ï¼šæŒ‡ä»¤ä¾èµ–ã€èµ„æºå†²çª
â†’ ä¼˜åŒ–ï¼šæé«˜ ILP
   - å¾ªç¯å±•å¼€
   - ç‹¬ç«‹ç´¯åŠ å™¨
   - é¢„æœŸæå‡ï¼š1.3-2x
```

---

## Warp State Statisticsï¼ˆå…³é”®é¡µé¢ï¼ï¼‰

### è¿›å…¥ Warp State Statistics

```
Details â†’ Warp State Statistics
```

### ç•Œé¢è¯´æ˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Warp State Statistics                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  â”Œâ”€ Warp Cycles Breakdown (é¥¼å›¾æˆ–æŸ±çŠ¶å›¾) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                     â”‚  â”‚
â”‚  â”‚         Stall Reasons:                              â”‚  â”‚
â”‚  â”‚                                                     â”‚  â”‚
â”‚  â”‚  Long Scoreboard:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  65%  â† ç­‰å†…å­˜       â”‚  â”‚
â”‚  â”‚  Short Scoreboard:  â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  10%  â† ç­‰è®¡ç®—       â”‚  â”‚
â”‚  â”‚  Barrier:           â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   5%  â† ç­‰åŒæ­¥       â”‚  â”‚
â”‚  â”‚  Not Selected:      â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘  15%  â† Occupancy   â”‚  â”‚
â”‚  â”‚  Active (æ‰§è¡Œ):     â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   5%  â† çœŸæ­£è®¡ç®—     â”‚  â”‚
â”‚  â”‚                                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³é”®æŒ‡æ ‡è§£è¯»ï¼ˆæœ€èƒ½è¯´æ˜é—®é¢˜çš„é¡µé¢ï¼‰

#### Stall Reasons å®Œæ•´è§£è¯»

**1. stall_long_scoreboardï¼ˆé•¿è®°åˆ†ç‰Œåœé¡¿ï¼‰**

```
æ˜¾ç¤ºï¼š65%

å«ä¹‰ï¼š65% æ—¶é—´åœ¨ç­‰å¾…å†…å­˜è®¿é—® (Global Memory)
å»¶è¿Ÿï¼š~200-400 cycles

åŸå› ï¼š
- è®¿é—® Global Memory
- L2 Cache miss
- DRAM è®¿é—®æ…¢

ä¼˜åŒ–æ–¹å‘ï¼š
1. æ”¹å–„å†…å­˜è®¿é—®æ¨¡å¼ï¼ˆcoalescingï¼‰
2. æé«˜ cache hit rate
3. ä½¿ç”¨ Shared Memory
4. ç®—å­èåˆ

æ³¨æ„ï¼š
- å¯¹äº memory-bound kernelï¼Œè¿™ä¸ªé«˜æ˜¯æ­£å¸¸çš„
- å…³é”®æ˜¯çœ‹ Occupancy æ˜¯å¦è¶³å¤Ÿéšè—å»¶è¿Ÿ
- å¦‚æœ Not Selected < 20%ï¼Œè¯´æ˜ Occupancy å¤Ÿäº†
```

**2. stall_short_scoreboardï¼ˆçŸ­è®°åˆ†ç‰Œåœé¡¿ï¼‰**

```
æ˜¾ç¤ºï¼š10%

å«ä¹‰ï¼š10% æ—¶é—´åœ¨ç­‰å¾…ç®—æœ¯è¿ç®—ç»“æœ
å»¶è¿Ÿï¼š~10-20 cycles

åŸå› ï¼š
- FP32/INT è¿ç®—çš„ä¾èµ–
- æŒ‡ä»¤çº§å¹¶è¡Œåº¦(ILP)ä¸è¶³

ä¼˜åŒ–æ–¹å‘ï¼š
1. æé«˜ ILPï¼ˆå¾ªç¯å±•å¼€ã€ç‹¬ç«‹ç´¯åŠ å™¨ï¼‰
2. å‡å°‘ä¾èµ–é“¾

åˆ¤æ–­ï¼š
< 15%  â† æ­£å¸¸
> 30%  â† éœ€è¦ä¼˜åŒ– ILP
```

**3. stall_barrierï¼ˆBarrier åœé¡¿ï¼‰**

```
æ˜¾ç¤ºï¼š5%

å«ä¹‰ï¼š5% æ—¶é—´åœ¨ç­‰å¾… __syncthreads()

åŸå› ï¼š
- __syncthreads() è°ƒç”¨å¤ªå¤š
- Block å†… threads æ‰§è¡Œä¸å‡è¡¡

ä¼˜åŒ–æ–¹å‘ï¼š
1. å‡å°‘ __syncthreads() è°ƒç”¨
2. é‡ç»„ä»£ç ï¼Œåˆå¹¶åŒæ­¥ç‚¹

åˆ¤æ–­ï¼š
< 10%  â† æ­£å¸¸
> 30%  â† ä¸¥é‡é—®é¢˜ï¼Œéœ€è¦é‡æ„
```

**4. stall_not_selectedï¼ˆæœªè¢«é€‰ä¸­ï¼‰**

```
æ˜¾ç¤ºï¼š15%

å«ä¹‰ï¼š15% æ—¶é—´ warp ç©ºé—²ï¼Œå› ä¸ºæ²¡æœ‰è¶³å¤Ÿçš„ warps åˆ‡æ¢
åŸå› ï¼šOccupancy ä¸è¶³

ä¼˜åŒ–æ–¹å‘ï¼š
1. æé«˜ Occupancy
   - å‡å°‘å¯„å­˜å™¨ä½¿ç”¨
   - å‡å°‘ Shared Memory ä½¿ç”¨
   - å¢å¤§ Block Size

åˆ¤æ–­ï¼š
< 20%  â† Occupancy è¶³å¤Ÿ
20-40% â† Occupancy å¯ä»¥æé«˜
> 40%  â† Occupancy ä¸¥é‡ä¸è¶³

æ³¨æ„ï¼š
- ä¸æ˜¯è¶Šä½è¶Šå¥½
- å¦‚æœ long_scoreboard é«˜ï¼Œæé«˜ Occupancy æœ‰å¸®åŠ©
- å¦‚æœ long_scoreboard ä½ï¼Œæé«˜ Occupancy å¯èƒ½æ— æ•ˆ
```

**5. Activeï¼ˆçœŸæ­£æ‰§è¡Œï¼‰**

```
æ˜¾ç¤ºï¼š5%

å«ä¹‰ï¼šåªæœ‰ 5% æ—¶é—´åœ¨çœŸæ­£æ‰§è¡ŒæŒ‡ä»¤ï¼

è¿™ä¸ªæ•°å­—ä½æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºï¼š
- GPU ä¾é å¤šä¸ª warp éšè—å»¶è¿Ÿ
- å•ä¸ª warp å¤§éƒ¨åˆ†æ—¶é—´åœ¨ç­‰å¾…

ä½†å¦‚æœ < 2%ï¼š
â†’ ä¼˜åŒ–ç©ºé—´å·¨å¤§
â†’ ä¼˜å…ˆè§£å†³æœ€å¤§çš„ stall reason
```

### ç»¼åˆæ¨ç†ç¤ºä¾‹ï¼ˆä¸“å®¶åˆ†æï¼‰

```
åœºæ™¯ï¼šåˆ†æä¸€ä¸ªæ…¢çš„ kernel

Warp State Statistics:
- stall_long_scoreboard:  65%
- stall_short_scoreboard: 10%
- stall_barrier:          5%
- stall_not_selected:     15%
- active:                 5%

æ¨ç†è¿‡ç¨‹ï¼š

1. 65% åœ¨ç­‰å†…å­˜ â†’ Memory-bound âœ“
2. åªæœ‰ 5% çœŸæ­£è®¡ç®— â†’ è®¡ç®—èµ„æºä¸¥é‡æµªè´¹
3. stall_not_selected = 15% â†’ Occupancy ä¸å¤Ÿé«˜

ä½†è¦æ³¨æ„ï¼š
æé«˜ Occupancy èƒ½å‡å°‘ stall_not_selected
ä½†å¦‚æœ stall_long_scoreboard è¿˜æ˜¯ 65%
â†’ åªæ˜¯æ›´å¤š warp åœ¨ç­‰å†…å­˜ï¼Œæ€»æ—¶é—´ä¸å˜

æ­£ç¡®ä¼˜åŒ–é¡ºåºï¼š
1. å…ˆè§£å†³å†…å­˜é—®é¢˜ï¼ˆ65% çš„ä¸»è¦ç“¶é¢ˆï¼‰
   - æ£€æŸ¥ Sectors Per Request
   - æ£€æŸ¥ Cache Hit Rate
   - è€ƒè™‘ç®—å­èåˆ
2. å†…å­˜ä¼˜åŒ–åï¼Œå¦‚æœ active è¿˜æ˜¯ä½ï¼Œå†è€ƒè™‘ ILP
3. æœ€åæ‰è€ƒè™‘ Occupancy
```

---

## Occupancy é¡µé¢

### è¿›å…¥ Occupancy

```
Details â†’ Occupancy
```

### ç•Œé¢è¯´æ˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Occupancy                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                    â”‚
â”‚  Theoretical Occupancy:  100%                      â”‚  â† ç†è®ºå€¼
â”‚  Achieved Occupancy:      62%                      â”‚  â† å®é™…å€¼
â”‚                                                    â”‚
â”‚  Limiting Factor:  Shared Memory                   â”‚  â† é™åˆ¶å› ç´ 
â”‚                                                    â”‚
â”‚  â”Œâ”€ Occupancy Chart â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                                            â”‚    â”‚
â”‚  â”‚   100% â”¤                                   â”‚    â”‚
â”‚  â”‚        â”‚ â–‘â–‘â–‘â–‘                              â”‚    â”‚
â”‚  â”‚    62% â”¤ â–ˆâ–ˆâ–ˆâ–ˆ  â† Actual                    â”‚    â”‚
â”‚  â”‚        â”‚                                   â”‚    â”‚
â”‚  â”‚     0% â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚    â”‚
â”‚  â”‚                                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                    â”‚
â”‚  Details:                                          â”‚
â”‚  - Blocks per SM:          4                       â”‚
â”‚  - Warps per SM:          32                       â”‚
â”‚  - Threads per Block:    256                       â”‚
â”‚  - Registers per Thread:  24                       â”‚
â”‚  - Shared Memory:      48 KB                       â”‚  â† ç”¨é‡
â”‚  - Shared Memory Limit: 96 KB per Block           â”‚
â”‚  - â†’ Using 50% of limit                           â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¦‚ä½•è§£è¯»

```
Theoretical = 100%, Achieved = 62%

é—®é¢˜ï¼šä¸ºä»€ä¹ˆå·®è· 38%ï¼Ÿ
â†’ æŸ¥çœ‹ "Limiting Factor"

å¸¸è§ Limiting Factorsï¼š

1. Registers
   â†’ æ¯ä¸ª thread ç”¨äº†å¤ªå¤šå¯„å­˜å™¨
   â†’ è§£å†³ï¼šå‡å°‘å˜é‡ã€ä½¿ç”¨ __launch_bounds__

2. Shared Memory
   â†’ Shared Memory ä½¿ç”¨è¶…è¿‡é˜ˆå€¼
   â†’ è§£å†³ï¼šå‡å°‘ Shared Memory ç”¨é‡

3. Block Size
   â†’ Block size å¤ªå°ï¼ˆå¦‚ 64ï¼‰
   â†’ è§£å†³ï¼šå¢å¤§åˆ° 256 æˆ– 512

4. Warps
   â†’ Warps æ•°é‡è¾¾åˆ°ç¡¬ä»¶ä¸Šé™
   â†’ è¿™æ˜¯ç¡¬ä»¶é™åˆ¶ï¼Œæ— æ³•ä¼˜åŒ–
```

### Occupancy ä¼˜åŒ–çš„è¯¯åŒº

```
âŒ é”™è¯¯æ€ç»´ï¼š
"æˆ‘çš„ Occupancy åªæœ‰ 50%ï¼Œéœ€è¦æé«˜åˆ° 100%"

âœ… æ­£ç¡®æ€ç»´ï¼š
"å…ˆçœ‹ Warp State Statistics ä¸­çš„ stall_not_selected
 - å¦‚æœ < 20% â†’ Occupancy å·²ç»å¤Ÿäº†ï¼Œä¸æ˜¯ç“¶é¢ˆ
 - å¦‚æœ > 40% â†’ æ‰éœ€è¦æé«˜ Occupancy

 è€Œä¸”è¦æƒè¡¡ï¼š
 - æé«˜ Occupancy å¯èƒ½éœ€è¦å‡å°‘ Shared Memory
 - è¿™å¯èƒ½é™ä½å•ä¸ª thread çš„æ•ˆç‡
 - æ€»ä½“æ€§èƒ½å¯èƒ½æ›´å·®"

å®ä¾‹ï¼š
Kernel A: Occupancy 100%, ä¸ç”¨ Shared Memory, Time = 10 ms
Kernel B: Occupancy 50%, ç”¨ Shared Memory, Time = 6 ms
â†’ Kernel B æ›´å¿«ï¼Œè™½ç„¶ Occupancy ä½
```

---

## Source é¡µé¢ï¼ˆæºç çº§åˆ†æï¼‰

### è¿›å…¥ Source é¡µé¢

```
å·¦ä¾§ Page List â†’ Source
```

### ç•Œé¢è¯´æ˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Source                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€ Source Code (å·¦ä¾§) â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€ Metrics (å³ä¾§) â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                              â”‚  â”‚                       â”‚ â”‚
â”‚  â”‚  1  __global__ void kernel   â”‚  â”‚  Line 5:              â”‚ â”‚
â”‚  â”‚  2  {                        â”‚  â”‚    Instructions: 120  â”‚ â”‚
â”‚  â”‚  3    int tid = ...;         â”‚  â”‚    Stalls: 45%        â”‚ â”‚
â”‚  â”‚  4                           â”‚  â”‚    Memory: 80%        â”‚ â”‚
â”‚  â”‚â†’ 5    float val = data[tid]; â”‚  â”‚                       â”‚ â”‚  â† é«˜äº®è¡Œ
â”‚  â”‚  6    val = val * 2;         â”‚  â”‚  Line 6:              â”‚ â”‚
â”‚  â”‚  7    result[tid] = val;     â”‚  â”‚    Instructions: 80   â”‚ â”‚
â”‚  â”‚  8  }                        â”‚  â”‚    ...                â”‚ â”‚
â”‚  â”‚                              â”‚  â”‚                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¦‚ä½•ä½¿ç”¨

1. **ç‚¹å‡»æŸä¸€è¡Œä»£ç **
2. **å³ä¾§æ˜¾ç¤ºè¯¥è¡Œçš„æ€§èƒ½æŒ‡æ ‡**ï¼š
   - Instructions Executedï¼ˆæ‰§è¡Œçš„æŒ‡ä»¤æ•°ï¼‰
   - Stall Percentageï¼ˆåœé¡¿ç™¾åˆ†æ¯”ï¼‰
   - Memory Transactionsï¼ˆå†…å­˜äº‹åŠ¡æ•°ï¼‰

3. **é¢œè‰²æ ‡æ³¨**ï¼š
   - ğŸ”´ çº¢è‰²ï¼šæ€§èƒ½çƒ­ç‚¹ï¼ˆå ç”¨æ—¶é—´å¤šï¼‰
   - ğŸŸ¡ é»„è‰²ï¼šä¸­ç­‰
   - ğŸŸ¢ ç»¿è‰²ï¼šå¼€é”€å°

### å®ä¾‹åˆ†æ

```c
// æºç 
5    float val = data[tid * 64];  // â† ç‚¹å‡»è¿™ä¸€è¡Œ

// å³ä¾§æ˜¾ç¤ºï¼š
Instructions:     200
Memory Trans:     150
Stalls:          85%  â† éå¸¸é«˜ï¼
  - Long Scoreboard: 80%
  - Others: 5%

// åˆ†æï¼š
â†’ è¿™ä¸€è¡Œæ˜¯ç“¶é¢ˆï¼
â†’ 80% æ—¶é—´åœ¨ç­‰å†…å­˜
â†’ åŸå› ï¼štid * 64 å¯¼è‡´è·¨æ­¥è®¿é—®
â†’ ä¼˜åŒ–ï¼šæ”¹ä¸º tidï¼ˆè¿ç»­è®¿é—®ï¼‰
```

---

## å®Œæ•´åˆ†ææµç¨‹å®æˆ˜

### åœºæ™¯ï¼šä¼˜åŒ–ä¸€ä¸ªæ…¢çš„ kernel

#### Step 1: æ‰“å¼€ NCU-UI

```bash
ncu -o profile ./my_kernel
ncu-ui profile.ncu-rep
```

#### Step 2: æŸ¥çœ‹ Summaryï¼ˆäº†è§£åŸºæœ¬æƒ…å†µï¼‰

```
Details â†’ Summary

Duration: 25 ms  â† ç›®æ ‡ï¼šä¼˜åŒ–è¿™ä¸ª
Grid: (256, 1, 1)
Block: (256, 1, 1)
```

#### Step 3: Speed of Lightï¼ˆ5 åˆ†é’Ÿå¿«é€Ÿè¯Šæ–­ï¼‰

```
Details â†’ GPU Speed Of Light

SM Throughput:     25%
Memory Throughput: 88%

â†’ åˆ¤æ–­ï¼šMemory-bound âœ“
â†’ ä¸‹ä¸€æ­¥ï¼šMemory Workload Analysis
```

#### Step 4: Memory Workload Analysisï¼ˆ20 åˆ†é’Ÿæ·±å…¥ï¼‰

```
Details â†’ Memory Workload Analysis

æŸ¥çœ‹å…³é”®æŒ‡æ ‡ï¼š
1. L2 Hit Rate: 22%  â† å¾ˆä½ï¼
   â†’ æ•°æ®å‡ ä¹æ²¡æœ‰å¤ç”¨

2. Sectors Per Request: 8.5  â† å¾ˆé«˜ï¼
   â†’ å¸¦å®½æµªè´¹ 88%

3. DRAM Throughput: 88%
   â†’ å¸¦å®½é¥±å’Œï¼Œä½†å¤§éƒ¨åˆ†æ˜¯æµªè´¹çš„

â†’ ç»“è®ºï¼šå†…å­˜è®¿é—®æ¨¡å¼å¾ˆå·®
â†’ ä¼˜åŒ–ï¼šä¿®å¤ coalescing
```

#### Step 5: Source é¡µé¢ï¼ˆå®šä½å…·ä½“ä»£ç ï¼‰

```
Source â†’ ç‚¹å‡»ä»£ç è¡Œ

å‘ç°ï¼š
Line 15: float val = data[tid * stride];
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
         Stalls: 85%
         Sectors Per Request: 8.5

â†’ é—®é¢˜æ‰¾åˆ°äº†ï¼stride å¯¼è‡´è·¨æ­¥è®¿é—®
```

#### Step 6: ä¿®å¤ä»£ç 

```c
// âŒ Before
int stride = 64;
float val = data[tid * stride];

// âœ… After
float val = data[tid];  // è¿ç»­è®¿é—®
```

#### Step 7: é‡æ–° Profile éªŒè¯

```bash
ncu -o profile_after ./my_kernel_fixed
ncu-ui profile_after.ncu-rep
```

**å¯¹æ¯”ç»“æœ**ï¼š

```
Memory Workload Analysis:
  Sectors Per Request: 8.5 â†’ 1.1 âœ“
  L2 Hit Rate: 22% â†’ 60% âœ“ (ç®—å­èåˆåä¼šæ›´é«˜)
  DRAM Throughput: 88% â†’ 90% âœ“ (æ›´é«˜æ•ˆçš„åˆ©ç”¨)

Summary:
  Duration: 25 ms â†’ 3.2 ms âœ“
  Speedup: 7.8x
```

---

## æ€»ç»“ï¼šNCU-UI ä½¿ç”¨æ¸…å•

### ç¬¬ä¸€æ­¥ï¼šSpeed of Light (5 åˆ†é’Ÿ)

```
â–¡ æ‰“å¼€ Details â†’ GPU Speed Of Light
â–¡ æŸ¥çœ‹ SM Throughput: _____%
â–¡ æŸ¥çœ‹ Memory Throughput: _____%
â–¡ åˆ¤æ–­ç“¶é¢ˆç±»å‹ï¼šCompute / Memory / Balanced / Under-utilized
```

### ç¬¬äºŒæ­¥ï¼šæ·±å…¥åˆ†æ (20 åˆ†é’Ÿ)

**å¦‚æœ Memory-bound:**
```
â–¡ æ‰“å¼€ Memory Workload Analysis
â–¡ æŸ¥çœ‹ L2 Hit Rate (è¡¨æ ¼ä¸­): _____%
â–¡ æŸ¥çœ‹ L1 Hit Rate (è¡¨æ ¼ä¸­): _____%
â–¡ æŸ¥çœ‹ Sectors Per Request (è¡¨æ ¼ä¸­): _____
â–¡ æŸ¥çœ‹ Bank Conflicts (è¡¨æ ¼ä¸­): _____
â–¡ ç»“è®ºï¼š_________________________
```

**å¦‚æœ Compute-bound:**
```
â–¡ æ‰“å¼€ Compute Workload Analysis
â–¡ æŸ¥çœ‹ Tensor Core Instructions: _____
â–¡ æŸ¥çœ‹ Threads Per Instruction: _____
â–¡ æŸ¥çœ‹ Issue Efficiency: _____%
â–¡ æ‰“å¼€ Warp State Statistics
â–¡ æŸ¥çœ‹å„ç§ Stall Reasons
â–¡ ç»“è®ºï¼š_________________________
```

### ç¬¬ä¸‰æ­¥ï¼šå®šä½ä»£ç  (10 åˆ†é’Ÿ)

```
â–¡ æ‰“å¼€ Source é¡µé¢
â–¡ ç‚¹å‡»ä»£ç è¡Œï¼ŒæŸ¥çœ‹å³ä¾§æŒ‡æ ‡
â–¡ æ‰¾åˆ°æ€§èƒ½çƒ­ç‚¹ï¼ˆçº¢è‰²æ ‡æ³¨ï¼‰
â–¡ è®°å½•é—®é¢˜ä»£ç è¡Œï¼š_____________
```

### ç¬¬å››æ­¥ï¼šä¼˜åŒ–éªŒè¯

```
â–¡ ä¿®æ”¹ä»£ç 
â–¡ é‡æ–° ncu profile
â–¡ å¯¹æ¯” Before/After
â–¡ éªŒè¯åŠ é€Ÿæ¯”
```

---

## é™„å½•ï¼šNCU-UI å¿«æ·é”®

```
å¸¸ç”¨å¿«æ·é”®ï¼š
- Ctrl+F: æœç´¢æŒ‡æ ‡
- Ctrl+Tab: åˆ‡æ¢ Page
- F5: åˆ·æ–°
- Ctrl+E: å¯¼å‡ºæ•°æ®
```

---

**å…³é”®æé†’**ï¼š

1. **ä¸è¦åªçœ‹ä¸€ä¸ªæŒ‡æ ‡**ï¼Œè¦ç»¼åˆåˆ†æ
2. **å›¾è¡¨å’Œè¡¨æ ¼éƒ½è¦çœ‹**ï¼Œæœ‰æ—¶å›¾è¡¨æ›´ç›´è§‚
3. **Source é¡µé¢å¾ˆæœ‰ç”¨**ï¼Œèƒ½ç²¾ç¡®å®šä½é—®é¢˜ä»£ç 
4. **å¯¹æ¯”æ˜¯å…³é”®**ï¼Œä¼˜åŒ–å‰åä¸€å®šè¦å¯¹æ¯”éªŒè¯
5. **é¢œè‰²æœ‰å«ä¹‰**ï¼Œçº¢è‰²é€šå¸¸æ˜¯é—®é¢˜æ‰€åœ¨

NCU-UI æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å¯è§†åŒ–å·¥å…·ï¼Œç†Ÿç»ƒä½¿ç”¨å®ƒèƒ½å¤§å¤§æé«˜ä¼˜åŒ–æ•ˆç‡ï¼
